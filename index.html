<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Harry's Bar Stock Checker</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #111, #222);
  color: #f9f9f9;
}
.screen {
  display: none;
  padding: 2rem 1rem;
  max-width: 500px;
  margin: 0 auto;
}
.screen.active {
  display: block;
  animation: fadeIn 0.3s ease-in-out;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.center { text-align: center; }
.logo {
  max-width: 200px;
  margin: 1rem auto;
}
h1, h2 {
  font-weight: 600;
}
.btn {
  padding: 1rem;
  font-size: 1.1rem;
  border-radius: 10px;
  border: none;
  margin: 1rem 0;
  cursor: pointer;
  width: 100%;
  transition: all 0.3s ease;
}
.btn:hover { transform: scale(1.03); }
.next-button {
  background: #28a745;
  color: #fff;
}
.next-button:hover {
  background: #218838;
}
.settings-icon {
  position: absolute;
  top: 1rem;
  right: 1rem;
  font-size: 1.5rem;
  cursor: pointer;
}
.list-item {
  background: #333;
  padding: 1rem;
  margin: 0.5rem 0;
  border-radius: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.list-item.crossed {
  text-decoration: line-through;
  opacity: 0.5;
}
input, select {
  width: 100%;
  padding: 0.8rem;
  font-size: 1rem;
  margin: 0.5rem 0 1rem;
  border-radius: 8px;
  border: 1px solid #ccc;
}
.item-actions button {
  margin-left: 5px;
  padding: 0.3rem 0.6rem;
  font-size: 0.9rem;
}
.clear-btn {
  background: #ff3d3d;
  color: #fff;
  border-radius: 5px;
  padding: 0.3rem 0.6rem;
  font-size: 0.9rem;
  cursor: pointer;
}
#summaryList .list-item {
  font-size: 0.9rem;
  padding: 0.5rem;
  margin: 0.25rem 0;
}
#confetti {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 9999;
}
</style>
</head>
<body>
<div class="settings-icon"onclick="showScreen('settings')">‚öôÔ∏è</div>

<!-- START SCREEN -->
<div id="start" class="screen active center">
  <img src="harrys_logo.png" alt="Harry's Bar" class="logo">
  <h1>Stock Checker</h1>
  <button class="btn"onclick="startStockCheck()">Start Stock Check</button>
</div>

<!-- SETTINGS SCREEN -->
<div id="settings" class="screen">
  <h2>Manage Items</h2>
  <input id="itemName" placeholder="Item name">
  <input id="itemMax" type="number" placeholder="Max stock">
  <button class="btn"onclick="addItem()">Add Item</button>
  <div id="itemList"></div>
  <button class="btn"onclick="showScreen('start')">Back</button>
</div>

<!-- WIZARD SCREEN -->
<div id="wizard" class="screen center">
  <h2 id="wizardItem"></h2>
  <div id="progress"></div>
  <input id="wizardInput" 
         type="number" 
         placeholder="Current stock" 
         autocomplete="off">
  <div>
    <button class="btn next-button"onclick="nextWizardItem()">Next</button>
    <button class="btn"onclick="prevWizardItem()">Back</button>
  </div>
</div>

<!-- SUMMARY SCREEN -->
<div id="summary" class="screen">
  <h2>Restock Summary</h2>
  <div id="summaryList"></div>
  <button class="btn"onclick="showScreen('start')">Done</button>
</div>

<!-- CONFETTI CANVAS -->
<canvas id="confetti"></canvas>

<script>
const defaultItems = [
  {"name":"Tequila Rose","max":5,"current":0},
  {"name":"Jungfrau","max":5,"current":0},
  {"name":"Kahula","max":5,"current":0},
  {"name":"Baileys","max":4,"current":0},
  {"name":"Tia Maria","max":4,"current":0},
  {"name":"Blumers","max":5,"current":0},
  {"name":"Wild Berries Reko","max":10,"current":0},
  {"name":"Strawberry Lime Reko","max":10,"current":0},
  {"name":"Mango Rasp Reko","max":10,"current":0},
  {"name":"Hoopers","max":10,"current":0},
  {"name":"Hooch","max":10,"current":0},
  {"name":"Newky Brown","max":15,"current":0},
  {"name":"Budweiser","max":18,"current":0},
  {"name":"Sol","max":6,"current":0},
  {"name":"Heineken","max":12,"current":0},
  {"name":"Desperado","max":12,"current":0},
  {"name":"Fresh Orange Juice","max":18,"current":0},
  {"name":"Pineapple Juice","max":18,"current":0},
  {"name":"Sauvignon Blanc","max":4,"current":0},
  {"name":"White Zinfandel","max":4,"current":0},
  {"name":"Pinot Grigio","max":4,"current":0},
  {"name":"Pinot Grigio Rosato","max":4,"current":0},
  {"name":"Blue Monster","max":10,"current":0},
  {"name":"Original Monster","max":10,"current":0},
  {"name":"Pink Monster","max":10,"current":0},
  {"name":"White Monster","max":10,"current":0},
  {"name":"Black Cherry VK","max":24,"current":0},
  {"name":"Tropical Fruits VK","max":12,"current":0},
  {"name":"Watermelon VK","max":18,"current":0},
  {"name":"Ice VK","max":18,"current":0},
  {"name":"Apple and Mango VK","max":18,"current":0},
  {"name":"Guinness Zero","max":18,"current":0},
  {"name":"Heineken Zero","max":12,"current":0},
  {"name":"Rekorderlig Zero","max":10,"current":0},
  {"name":"Slimline","max":36,"current":0},
  {"name":"Indian Tonic","max":36,"current":0}
];
let items = JSON.parse(localStorage.getItem('stockItems'));
if (!items || !Array.isArray(items) || items.length === 0) {
  items = defaultItems;
}
let currentWizardIndex = 0;

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if (id === 'settings') renderItemList();
}
function saveItems() {
  localStorage.setItem('stockItems', JSON.stringify(items));
}
function addItem() {
  const name = document.getElementById('itemName').value.trim();
  const max = parseInt(document.getElementById('itemMax').value);
  if (!name || isNaN(max) || max <= 0) return alert('Enter valid item and max.');
  items.push({ name, max, current: 0 }); saveItems();
  document.getElementById('itemName').value = '';
  document.getElementById('itemMax').value = '';
  renderItemList();
}
function deleteItem(index) {
  if (confirm('Delete this item?')) {
    items.splice(index, 1);
    saveItems();
    renderItemList();
  }
}
function editMax(index) {
  const newMax = prompt('Enter new max stock:', items[index].max);
  if (newMax && !isNaN(parseInt(newMax))) {
    items[index].max = parseInt(newMax);
    saveItems();
    renderItemList();
  }
}
function renderItemList() {
  const container = document.getElementById('itemList');
  container.innerHTML = '';
  items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'list-item';
    div.innerHTML = `
      <span>${item.name} (Max: ${item.max})</span>
      <div class="item-actions">
        <button onClick="editMax(${i})">‚úèÔ∏è</button>
        <button onClick="deleteItem(${i})">üóëÔ∏è</button>
      </div>`;
    container.appendChild(div);
  });
}
function startStockCheck() {
  if (items.length === 0) return alert('Add items in settings first.');
  currentWizardIndex = 0;
  showScreen('wizard');
  showWizardItem();
}
function showWizardItem() {
  const item = items[currentWizardIndex];
  document.getElementById("wizardItem").textContent = `How many ${item.name}?`;
  document.getElementById("progress").textContent = `${currentWizardIndex + 1}/${items.length}`;
  document.getElementById("wizardInput").value = ""; // Always blank
  document.getElementById("wizardInput").focus();
}
function prevWizardItem() {
  if (currentWizardIndex > 0) {
    currentWizardIndex--;
    showWizardItem();
  }
}
function nextWizardItem() {
  const val = parseInt(document.getElementById("wizardInput").value);
  items[currentWizardIndex].current = isNaN(val) ? 0 : val;
  currentWizardIndex++;
  if (currentWizardIndex >= items.length) {
    saveItems();
    showSummary();
  } else {
    showWizardItem();
  }
}
function showSummary() {
  showScreen("summary");
  const container = document.getElementById("summaryList");
  container.innerHTML = "";  
  items.forEach(item => {
    const diff = item.max - item.current;
    if (diff <= 0) return;
    const div = document.createElement("div");
    div.className = "list-item";
    const label = document.createElement("span");
    label.textContent = `${item.name}: ${diff}`;
    const button = document.createElement("button");
    button.className = "clear-btn";
    button.textContent = "‚úî";
    button.addEventListener("click", () => {
      label.textContent = `${item.name}: 0`;
      div.classList.add("crossed");
      launchConfetti();
    });
    div.appendChild(label);
    div.appendChild(button);
    container.appendChild(div);
  });
  launchConfetti();
}

/* ==========================
           CONFETTI
========================== */
const confettiCanvas = document.getElementById("confetti");
const ctx = confettiCanvas.getContext("2d");
let particles = [];
function launchConfetti() {
  for (let i = 0; i < 100; i++) {
    particles.push({
      x: Math.random() * window.innerWidth,
      y: Math.random() * window.innerHeight,
      speedX: (Math.random()-0.5) * 6,
      speedY: Math.random() * 5 + 5,
      color: `hsl(${Math.random() * 360},100%,50%)`
    });
  }
}
function animateConfetti() {
  ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
  particles.forEach((p, i) => {
    p.x += p.speedX;
    p.y += p.speedY;
    p.speedY += 0.1;
    ctx.fillStyle = p.color;
    ctx.fillRect(p.x, p.y, 6, 6);
    if (p.y > window.innerHeight) {
      particles.splice(i, 1);
    }
  });
  requestAnimationFrame(animateConfetti);
}
function resizeCanvas() {
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();
animateConfetti();
</script>
</body>
</html>
